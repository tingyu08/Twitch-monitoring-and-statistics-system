# ğŸ® Twitch Analytics - ç›´æ’­æ•¸æ“šåˆ†æå¹³å°

ä¸€å€‹åŠŸèƒ½å®Œæ•´çš„å…¨ç«¯ Web æ‡‰ç”¨ç¨‹å¼ï¼Œç‚º **å¯¦æ³ä¸»** å’Œ **è§€çœ¾**
æä¾›æ·±åº¦çš„ Twitch ç›´æ’­æ•¸æ“šåˆ†æèˆ‡å€‹äººçµ±è¨ˆè¿½è¹¤ã€‚

![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=flat-square&logo=typescript&logoColor=white)
![Next.js](https://img.shields.io/badge/Next.js_14-000000?style=flat-square&logo=next.js&logoColor=white)
![React](https://img.shields.io/badge/React_18-20232A?style=flat-square&logo=react&logoColor=61DAFB)
![Node.js](https://img.shields.io/badge/Node.js-43853D?style=flat-square&logo=node.js&logoColor=white)
![Express](https://img.shields.io/badge/Express-404D59?style=flat-square&logo=express&logoColor=white)
![Prisma](https://img.shields.io/badge/Prisma-2D3748?style=flat-square&logo=prisma&logoColor=white)
![Turso](https://img.shields.io/badge/Turso-4FF8D2?style=flat-square&logo=turso&logoColor=black)
![Playwright](https://img.shields.io/badge/Playwright-45ba4b?style=flat-square&logo=playwright&logoColor=white)
![Tests](https://img.shields.io/badge/Tests-235%2B_Passing-brightgreen?style=flat-square)
![Status](https://img.shields.io/badge/Status-Production-success?style=flat-square)

---

## ğŸŒ ç·šä¸Š Demo

| æœå‹™            | ç¶²å€                                                                                                                         |
| --------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| ğŸ–¥ï¸ **å‰ç«¯æ‡‰ç”¨** | [https://twitch-monitoring-and-statistics-sy.vercel.app](https://twitch-monitoring-and-statistics-sy.vercel.app)             |
| ğŸ”Œ **å¾Œç«¯ API** | [https://mao-twitch-analytics.zeabur.app](https://mao-twitch-analytics.zeabur.app) |

> ğŸ“ **æ³¨æ„**: å¾Œç«¯éƒ¨ç½²æ–¼ Zeaburï¼Œé¦–æ¬¡è¼‰å…¥å¯èƒ½éœ€è¦æ•¸ç§’ï¼ˆå¦‚é‡å†·å•Ÿå‹•ï¼‰

---

## âœ¨ åŠŸèƒ½äº®é»

### ğŸ¥ å¯¦æ³ä¸»å„€è¡¨æ¿ (Streamer Dashboard)

| åŠŸèƒ½             | èªªæ˜                                                |
| ---------------- | --------------------------------------------------- |
| **æœƒè©±çµ±è¨ˆç¸½è¦½** | å³æ™‚é¡¯ç¤ºç¸½ç›´æ’­æ™‚æ•¸ã€å ´æ¬¡æ•¸é‡ã€å¹³å‡æ™‚é•·ã€å·”å³°è§€çœ¾    |
| **è§€çœ¾è¶¨å‹¢åœ–è¡¨** | Recharts ç¹ªè£½çš„æ™‚é–“åºåˆ—æŠ˜ç·šåœ–ï¼Œæ”¯æ´ 24h/7d/30d åˆ‡æ› |
| **ç›´æ’­ç†±åŠ›åœ–**   | è¦–è¦ºåŒ–æ¯é€±å„æ™‚æ®µçš„ç›´æ’­é »ç‡åˆ†å¸ƒ                      |
| **è¨‚é–±è¶¨å‹¢åˆ†æ** | è¨‚é–±äººæ•¸è®ŠåŒ–èˆ‡å¢é•·ç‡è¨ˆç®—                            |
| **åå¥½è¨­å®š**     | è‡ªè¨‚é¡¯ç¤º/éš±è—å€å¡Šï¼Œè¨­å®šè‡ªå‹•å„²å­˜è‡³ localStorage      |

### ğŸ‘¤ è§€çœ¾å„€è¡¨æ¿ (Viewer Dashboard)

| åŠŸèƒ½             | èªªæ˜                                               |
| ---------------- | -------------------------------------------------- |
| **å€‹äººè§€å½±çµ±è¨ˆ** | è¿½è¹¤åœ¨å„é »é“çš„è§€çœ‹æ™‚æ•¸ã€ç•™è¨€æ•¸ã€è¡¨æƒ…ç¬¦è™Ÿä½¿ç”¨       |
| **èŠå¤©äº’å‹•åˆ†æ** | ç•™è¨€è¶¨å‹¢åœ–ã€äº’å‹•é¡å‹åˆ†ä½ˆï¼ˆè¨‚é–±/Cheer/Raid ç­‰ï¼‰     |
| **è¶³è·¡ç¸½è¦½**     | ğŸ† æˆå°±å¾½ç« ç³»çµ± + å…­ç¶­é›·é”åœ–åˆ†æè§€çœ¾æŠ•å…¥ç•«åƒ       |
| **å¯æ‹–æ‹½ä½ˆå±€**   | ä½¿ç”¨ `react-grid-layout` å¯¦ç¾è‡ªè¨‚å„€è¡¨æ¿æ’ç‰ˆ        |
| **éš±ç§æ§åˆ¶**     | GDPR åˆè¦ï¼š10 é …ç´°ç²’åº¦æ”¶é›†é–‹é—œã€è³‡æ–™åŒ¯å‡ºã€å¸³è™Ÿåˆªé™¤ |

### ğŸ¤– è‡ªå‹•åŒ–è³‡æ–™æ”¶é›†

| åŠŸèƒ½                 | èªªæ˜                                                  |
| -------------------- | ----------------------------------------------------- |
| **è‡ªå‹•è¿½è¹¤åŒæ­¥**     | ç™»å…¥å³è‡ªå‹•åŒæ­¥ Twitch è¿½è¹¤æ¸…å–®ï¼Œä¸¦æ¯å°æ™‚èƒŒæ™¯æ›´æ–°      |
| **å³æ™‚é–‹å°ç›£æ§**     | ç²¾ç¢ºç›£æ¸¬è¿½è¹¤é »é“çš„é–‹å°ç‹€æ…‹ã€è§€çœ¾æ•¸èˆ‡éŠæˆ²åˆ†é¡          |
| **è§€çœ‹æ™‚é–“æ¨ç®—**     | é€éèŠå¤©å®¤æ´»å‹•æ™ºæ…§æ¨ç®—å¯¦éš›è§€çœ‹æ™‚æ•¸ï¼ˆåˆ†æ®µè¨ˆæ™‚é‚è¼¯ï¼‰    |
| **Token è‡ªå‹•åˆ·æ–°**   | å¯¦ä½œ RefreshingAuthProviderï¼Œè‡ªå‹•ç¶­è­·é•·æœŸé€£ç·š         |
| **EventSub Webhook** | ä½¿ç”¨ Twurple EventSubMiddleware å³æ™‚æ¥æ”¶é–‹å°/ä¸‹æ’­äº‹ä»¶ |

### âš¡ WebSocket å³æ™‚æ¨é€ (New!)

| åŠŸèƒ½               | èªªæ˜                                                |
| ------------------ | --------------------------------------------------- |
| **æ¯«ç§’ç´šæ•¸æ“šæ›´æ–°** | ä½¿ç”¨ Socket.IO å¯¦ç¾å³æ™‚æ¨é€ï¼Œå»¶é²å¾ 3 ç§’é™è‡³ ~200ms |
| **é›¶è¼ªè©¢æ¶æ§‹**     | å‰ç«¯ä¸å†å®šæ™‚è¼ªè©¢ï¼Œåªåœ¨æœ‰æ–°æ•¸æ“šæ™‚æ‰æ›´æ–°              |
| **æ™ºæ…§é‡é€£**       | ç¶²è·¯æ–·ç·šè‡ªå‹•é‡é€£ï¼Œç¢ºä¿æŒä¹…ç©©å®šé€£ç·š                  |
| **ç¯€çœè³‡æº**       | å¤§å¹…æ¸›å°‘ API è«‹æ±‚æ¬¡æ•¸ï¼Œç¯€çœè³‡æ–™åº«æŸ¥è©¢èˆ‡é›²ç«¯å…è²»é¡åº¦ |

### ğŸ” èªè­‰èˆ‡å®‰å…¨

- **Twitch OAuth 2.0** æ•´åˆç™»å…¥
- **JWT Token** æ­é… HttpOnly Cookie
- **é›™é‡è§’è‰²æ©Ÿåˆ¶**ï¼šå¯¦æ³ä¸»è‡ªå‹•ç²å¾—è§€çœ¾èº«ä»½
- **åŒæ„æˆæ¬Šæµç¨‹**ï¼šé¦–æ¬¡ç™»å…¥éœ€æ˜ç¢ºåŒæ„æ”¶é›†æ¢æ¬¾

---

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend (Next.js 14)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Streamer    â”‚  â”‚ Viewer      â”‚  â”‚ Privacy Settings    â”‚  â”‚
â”‚  â”‚ Dashboard   â”‚  â”‚ Dashboard   â”‚  â”‚ & Consent           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                â”‚                    â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                          â–¼                                  â”‚
â”‚               SWR (Data Fetching & Caching)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ HTTPS
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Backend (Express.js)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Auth Module â”‚  â”‚ Streamer    â”‚  â”‚ Viewer Module       â”‚  â”‚
â”‚  â”‚ (OAuth/JWT) â”‚  â”‚ Module      â”‚  â”‚ (Stats/Privacy)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                â”‚                    â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                          â–¼                                  â”‚
â”‚               Prisma ORM + Turso (Cloud)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 17+ Models: Streamer, Viewer, Channel, Stats,        â”‚   â”‚
â”‚  â”‚ LifetimeStats, Privacy, ExportJob, AuditLog...       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Twitch API (Twurple)  â”‚
              â”‚   â€¢ Helix API           â”‚
              â”‚   â€¢ Chat (IRC)          â”‚
              â”‚   â€¢ EventSub Webhook    â”‚
              â”‚   â€¢ DecAPI (Followage)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‰ç«¯æŠ€è¡“æ£§

| æŠ€è¡“              | ç‰ˆæœ¬    | ç”¨é€”                    |
| ----------------- | ------- | ----------------------- |
| Next.js           | 14.2.33 | React æ¡†æ¶ (App Router) |
| React             | 18.3.1  | UI å‡½å¼åº«               |
| TypeScript        | 5.6.3   | é¡å‹å®‰å…¨                |
| TailwindCSS       | 3.4.14  | æ¨£å¼æ¡†æ¶                |
| Recharts          | 3.5.1   | è³‡æ–™è¦–è¦ºåŒ–åœ–è¡¨          |
| SWR               | 2.3.7   | è³‡æ–™ç²å–èˆ‡å¿«å–          |
| react-grid-layout | 2.1.0   | å¯æ‹–æ‹½ç¶²æ ¼ä½ˆå±€          |
| Lucide React      | 0.561.0 | åœ–ç¤ºåº«                  |

### å¾Œç«¯æŠ€è¡“æ£§

| æŠ€è¡“           | ç‰ˆæœ¬   | ç”¨é€”               |
| -------------- | ------ | ------------------ |
| Node.js        | 20.x   | åŸ·è¡Œç’°å¢ƒ           |
| Express        | 4.19.2 | HTTP æ¡†æ¶          |
| TypeScript     | 5.6.3  | é¡å‹å®‰å…¨           |
| Prisma         | 7.1.0  | ORM                |
| Turso (LibSQL) | -      | é›²ç«¯é‚Šç·£è³‡æ–™åº«     |
| Twurple        | 8.0.2  | Twitch API å®¢æˆ¶ç«¯  |
| Socket.IO      | 4.8.x  | WebSocket å³æ™‚æ¨é€ |
| node-cron      | 4.2.1  | æ’ç¨‹ä»»å‹™           |
| Archiver       | 7.0.1  | è³‡æ–™åŒ¯å‡º ZIP æ‰“åŒ…  |

### æ¸¬è©¦å·¥å…·

| å·¥å…·                  | ç”¨é€”             |
| --------------------- | ---------------- |
| Jest                  | å–®å…ƒèˆ‡æ•´åˆæ¸¬è©¦   |
| React Testing Library | å…ƒä»¶æ¸¬è©¦         |
| Playwright            | E2E è·¨ç€è¦½å™¨æ¸¬è©¦ |
| Supertest             | API ç«¯é»æ¸¬è©¦     |

---

## ğŸ“Š å°ˆæ¡ˆé€²åº¦

### Epic 1: å¯¦æ³ä¸»åˆ†æå„€è¡¨æ¿ âœ… 100%

| Story | åç¨±                 | ç‹€æ…‹ | å®Œæˆæ—¥æœŸ   |
| ----- | -------------------- | ---- | ---------- |
| 1.1   | å¯¦æ³ä¸»ç™»å…¥èˆ‡é »é“ç¶å®š | âœ…   | 2025-12-09 |
| 1.2   | æœƒè©±çµ±è¨ˆç¸½è¦½         | âœ…   | 2025-12-09 |
| 1.3   | æ™‚é–“èˆ‡é »ç‡åœ–è¡¨       | âœ…   | 2025-12-10 |
| 1.4   | è¨‚é–±è¶¨å‹¢ (Lite)      | âœ…   | 2025-12-10 |
| 1.5   | å„€è¡¨æ¿ UX åå¥½è¨­å®š   | âœ…   | 2025-12-11 |

### Epic 2: è§€çœ¾åƒèˆ‡åº¦åˆ†æ âœ… 100%

| Story | åç¨±                  | ç‹€æ…‹ | å®Œæˆæ—¥æœŸ   |
| ----- | --------------------- | ---- | ---------- |
| 2.1   | è§€çœ¾ç™»å…¥èˆ‡æˆæ¬Š        | âœ…   | 2025-12-12 |
| 2.2   | è§€çœ‹æ™‚æ•¸çµ±è¨ˆ          | âœ…   | 2025-12-12 |
| 2.3   | èŠå¤©èˆ‡äº’å‹•åˆ†æ        | âœ…   | 2025-12-16 |
| 2.4   | è¶³è·¡ç¸½è¦½å„€è¡¨æ¿        | âœ…   | 2025-12-17 |
| 2.5   | éš±ç§èˆ‡æˆæ¬Šæ§åˆ¶ (GDPR) | âœ…   | 2025-12-17 |

### Epic 3: è³‡æ–™æ”¶é›†èˆ‡è‡ªå‹•åŒ– âœ… 100%

| Story | åç¨±                 | ç‹€æ…‹ | å®Œæˆæ—¥æœŸ   |
| ----- | -------------------- | ---- | ---------- |
| 3.1   | Token è‡ªå‹•ç®¡ç†       | âœ…   | 2025-12-23 |
| 3.2   | é »é“è¿½è¹¤æ¸…å–®åŒæ­¥     | âœ…   | 2025-12-18 |
| 3.3   | å³æ™‚é–‹å°ç‹€æ…‹ç›£æ§     | âœ…   | 2025-12-19 |
| 3.4   | è§€çœ‹æ™‚é–“æ™ºæ…§æ¨ç®—     | âœ…   | 2025-12-22 |
| 3.5   | èŠå¤©å®¤è¨Šæ¯ç›£è½èˆ‡å­˜å„² | âœ…   | 2025-12-22 |
| 3.6   | èƒŒæ™¯æ’ç¨‹èˆ‡éŒ¯èª¤è™•ç†   | âœ…   | 2025-12-23 |
| 3.7   | EventSub Webhook     | âœ…   | 2025-12-23 |

### Epic 5: å³æ™‚æ¨é€èˆ‡é€²éšåŠŸèƒ½ ğŸ”„ é€²è¡Œä¸­

| Story | åç¨±                 | ç‹€æ…‹ | å®Œæˆæ—¥æœŸ   |
| ----- | -------------------- | ---- | ---------- |
| 5.1   | WebSocket å³æ™‚æ¨é€   | âœ…   | 2025-12-29 |
| 5.2   | å³æ™‚é€šçŸ¥ç³»çµ± (Toast) | â³   | è¦åŠƒä¸­     |
| 5.3   | èŠå¤©å®¤å³æ™‚é¡åƒ       | â³   | è¦åŠƒä¸­     |

### æœªä¾†è¦åŠƒ (Epic 6~7)

- **Epic 6**: ä½¿ç”¨è€…é«”é©—å„ªåŒ–
  - æ·±è‰²/æ·ºè‰²ä¸»é¡Œåˆ‡æ›
  - è¡Œå‹•è£ç½® RWD å„ªåŒ–
  - å¤šèªè¨€æ”¯æ´ (i18n)
  - PWA é›¢ç·šæ”¯æ´

- **Epic 7**: ç‡Ÿé‹ç›£æ§èˆ‡ç¶­è­·
  - Sentry éŒ¯èª¤è¿½è¹¤æ•´åˆ
  - Google Analytics æ•´åˆ
  - è‡ªå‹•å‚™ä»½æ©Ÿåˆ¶

---

## ğŸ§ª æ¸¬è©¦è¦†è“‹

| é¡å‹             | æ¸¬è©¦å¥—ä»¶ | æ¸¬è©¦æ•¸   | é€šéç‡      |
| ---------------- | -------- | -------- | ----------- |
| å¾Œç«¯å–®å…ƒæ¸¬è©¦     | 7+       | 64+      | **100%** âœ… |
| å‰ç«¯å–®å…ƒæ¸¬è©¦     | 16+      | 109+     | **100%** âœ… |
| E2E (Playwright) | 10       | 59       | **100%** âœ… |
| æ•ˆèƒ½æ¸¬è©¦         | 1        | 3        | **100%** âœ… |
| **ç¸½è¨ˆ**         | **34+**  | **235+** | **100%** ğŸ‰ |

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
Twitch-Analytics/
â”œâ”€â”€ frontend/                    # Next.js å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/                 # App Router é é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ streamer/    # å¯¦æ³ä¸»å„€è¡¨æ¿
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ viewer/      # è§€çœ¾å„€è¡¨æ¿
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ [channelId]/   # é »é“è©³æƒ…
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ footprint/     # è¶³è·¡ç¸½è¦½
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ settings/      # éš±ç§è¨­å®š
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/            # èªè­‰å›èª¿
â”‚   â”‚   â”‚   â””â”€â”€ privacy-policy/  # éš±ç§æ”¿ç­–
â”‚   â”‚   â”œâ”€â”€ features/            # åŠŸèƒ½æ¨¡çµ„
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/            # èªè­‰é‚è¼¯
â”‚   â”‚   â”‚   â”œâ”€â”€ privacy/         # éš±ç§å…ƒä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ streamer-dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ viewer-dashboard/
â”‚   â”‚   â”œâ”€â”€ components/          # å…±ç”¨å…ƒä»¶
â”‚   â”‚   â””â”€â”€ lib/                 # å·¥å…·å‡½å¼
â”‚   â”œâ”€â”€ e2e/                     # Playwright E2E æ¸¬è©¦
â”‚   â””â”€â”€ __tests__/               # Jest å–®å…ƒæ¸¬è©¦
â”‚
â”œâ”€â”€ backend/                     # Express å¾Œç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ modules/             # åŠŸèƒ½æ¨¡çµ„
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/            # èªè­‰ (OAuth/JWT)
â”‚   â”‚   â”‚   â”œâ”€â”€ streamer/        # å¯¦æ³ä¸» API
â”‚   â”‚   â”‚   â””â”€â”€ viewer/          # è§€çœ¾ API
â”‚   â”‚   â”œâ”€â”€ services/            # æœå‹™å±¤
â”‚   â”‚   â”‚   â”œâ”€â”€ account-deletion.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ data-export.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ privacy-consent.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ twitch-chat.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ twitch-helix.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ jobs/                # æ’ç¨‹ä»»å‹™
â”‚   â”‚   â””â”€â”€ db/                  # è³‡æ–™åº«é€£ç·š
â”‚   â””â”€â”€ prisma/                  # Prisma Schema
â”‚
â””â”€â”€ docs/                        # å°ˆæ¡ˆæ–‡ä»¶
    â”œâ”€â”€ stories/                 # User Stories (12 ä»½)
    â”œâ”€â”€ architecture/            # æ¶æ§‹æ–‡ä»¶
    â””â”€â”€ qa/                      # QA å ±å‘Š
```

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å‰ç½®éœ€æ±‚

- Node.js 20.x æˆ–æ›´é«˜ç‰ˆæœ¬
- npm 9.x æˆ–æ›´é«˜ç‰ˆæœ¬
- [Twitch é–‹ç™¼è€…å¸³è™Ÿ](https://dev.twitch.tv/console/apps) (ç”¨æ–¼ OAuth)

### 1. è¤‡è£½å°ˆæ¡ˆ

```bash
git clone https://github.com/tingyu08/Twitch-monitoring-and-statistics-system.git
cd Twitch-monitoring-and-statistics-system
```

### 2. å®‰è£ä¾è³´

```bash
# å®‰è£å‰ç«¯ä¾è³´
cd frontend
npm install

# å®‰è£å¾Œç«¯ä¾è³´
cd ../backend
npm install
```

### 3. ç’°å¢ƒè®Šæ•¸è¨­å®š

**å¾Œç«¯ (`backend/.env`)**

```env
# è³‡æ–™åº«
DATABASE_URL="file:./prisma/dev.db"

# Twitch OAuth
TWITCH_CLIENT_ID=your_twitch_client_id
TWITCH_CLIENT_SECRET=your_twitch_client_secret
TWITCH_CALLBACK_URL=http://localhost:4000/api/auth/twitch/callback

# JWT
JWT_SECRET=your_jwt_secret_key

# CORS
FRONTEND_URL=http://localhost:3000

# ä¼ºæœå™¨
PORT=4000
NODE_ENV=development

# è³‡æ–™åŒ¯å‡º (Story 2.5)
EXPORT_STORAGE_PATH=./exports
EXPORT_EXPIRY_HOURS=24
```

**å‰ç«¯ (`frontend/.env.local`)**

```env
NEXT_PUBLIC_API_URL=http://localhost:4000/api
NEXT_PUBLIC_TWITCH_CLIENT_ID=your_twitch_client_id
```

### 4. è³‡æ–™åº«åˆå§‹åŒ–

```bash
cd backend
npx prisma migrate dev
npx prisma db seed  # è¼‰å…¥æ¼”ç¤ºæ•¸æ“š (é¸ç”¨)
```

### 5. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

**å•Ÿå‹•å¾Œç«¯** (Terminal 1)

```bash
cd backend
npm run dev
# ä¼ºæœå™¨é‹è¡Œæ–¼ http://localhost:4000
```

**å•Ÿå‹•å‰ç«¯** (Terminal 2)

```bash
cd frontend
npm run dev
# æ‡‰ç”¨é‹è¡Œæ–¼ http://localhost:3000
```

### 6. å•Ÿå‹• Cloudflare Tunnel (EventSub æ¸¬è©¦ç”¨)

è‹¥éœ€æ¸¬è©¦ EventSub Webhookï¼Œéœ€è¦ä¸€å€‹å…¬é–‹çš„ HTTPS URLã€‚ä½¿ç”¨ Cloudflare Tunnel å¯å¿«é€Ÿç”Ÿæˆè‡¨æ™‚ç¶²å€ï¼š

**ä¸‹è¼‰ cloudflared**

å¾
[Cloudflare å®˜æ–¹](https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/downloads/)
ä¸‹è¼‰å°æ‡‰å¹³å°çš„ `cloudflared` åŸ·è¡Œæª”ï¼Œæ”¾ç½®æ–¼å°ˆæ¡ˆæ ¹ç›®éŒ„ã€‚

**å•Ÿå‹• Tunnel** (Terminal 3)

```bash
# Windows
.\cloudflared.exe tunnel --url http://localhost:4000

# macOS / Linux
./cloudflared tunnel --url http://localhost:4000
```

å•Ÿå‹•å¾Œæœƒé¡¯ç¤ºé¡ä¼¼ä»¥ä¸‹è¼¸å‡ºï¼š

```
Your quick Tunnel has been created! Visit it at (it may take some time to be reachable):
https://random-name-here.trycloudflare.com
```

**è¨­å®šç’°å¢ƒè®Šæ•¸**

å°‡ç”Ÿæˆçš„ URL å¡«å…¥ `backend/.env`ï¼š

```env
EVENTSUB_ENABLED=true
EVENTSUB_SECRET=your_random_secret_string
EVENTSUB_CALLBACK_URL=https://random-name-here.trycloudflare.com
```

> âš ï¸ æ³¨æ„ï¼šæ¯æ¬¡é‡å•Ÿ Cloudflare Tunnel æœƒç”Ÿæˆæ–°çš„ URLï¼Œéœ€é‡æ–°æ›´æ–° `.env` ä¸¦é‡å•Ÿå¾Œç«¯ã€‚

### 7. é–‹å§‹ä½¿ç”¨

1. è¨ªå• http://localhost:3000
2. é»æ“Šã€Œä½¿ç”¨ Twitch ç™»å…¥ã€
3. æˆæ¬Šæ‡‰ç”¨å­˜å–ä½ çš„ Twitch å¸³è™Ÿ
4. é€²å…¥å„€è¡¨æ¿æŸ¥çœ‹çµ±è¨ˆæ•¸æ“š

---

## ğŸ”Œ API ç«¯é»

### èªè­‰

| æ–¹æ³• | ç«¯é»                        | èªªæ˜                |
| ---- | --------------------------- | ------------------- |
| GET  | `/api/auth/twitch`          | åˆå§‹åŒ– Twitch OAuth |
| GET  | `/api/auth/twitch/callback` | OAuth å›èª¿          |
| GET  | `/api/auth/me`              | å–å¾—ç•¶å‰ä½¿ç”¨è€…      |
| POST | `/api/auth/logout`          | ç™»å‡º                |

### å¯¦æ³ä¸»

| æ–¹æ³• | ç«¯é»                        | èªªæ˜         |
| ---- | --------------------------- | ------------ |
| GET  | `/api/streamer/summary`     | çµ±è¨ˆç¸½è¦½     |
| GET  | `/api/streamer/time-series` | æ™‚é–“åºåˆ—è³‡æ–™ |
| GET  | `/api/streamer/heatmap`     | ç†±åŠ›åœ–è³‡æ–™   |
| GET  | `/api/streamer/subs-trend`  | è¨‚é–±è¶¨å‹¢     |

### è§€çœ¾

| æ–¹æ³• | ç«¯é»                                    | èªªæ˜             |
| ---- | --------------------------------------- | ---------------- |
| GET  | `/api/viewer/channels`                  | è§€çœ‹éçš„é »é“åˆ—è¡¨ |
| GET  | `/api/viewer/stats/:channelId`          | é »é“è§€çœ‹çµ±è¨ˆ     |
| GET  | `/api/viewer/footprint/:channelId`      | è¶³è·¡ç¸½è¦½         |
| GET  | `/api/viewer/message-stats`             | èŠå¤©çµ±è¨ˆ         |
| GET  | `/api/viewer/lifetime-stats/:channelId` | å…¨æ™‚æ®µçµ±è¨ˆ       |

### éš±ç§æ§åˆ¶

| æ–¹æ³•  | ç«¯é»                                  | èªªæ˜         |
| ----- | ------------------------------------- | ------------ |
| GET   | `/api/viewer/privacy/settings`        | å–å¾—éš±ç§è¨­å®š |
| PATCH | `/api/viewer/privacy/settings`        | æ›´æ–°éš±ç§è¨­å®š |
| POST  | `/api/viewer/privacy/export`          | è«‹æ±‚è³‡æ–™åŒ¯å‡º |
| GET   | `/api/viewer/privacy/export/:jobId`   | æª¢æŸ¥åŒ¯å‡ºç‹€æ…‹ |
| POST  | `/api/viewer/privacy/delete-account`  | è«‹æ±‚åˆªé™¤å¸³è™Ÿ |
| POST  | `/api/viewer/privacy/cancel-deletion` | æ’¤éŠ·åˆªé™¤è«‹æ±‚ |

---

## ğŸ§ª æ¸¬è©¦

### åŸ·è¡Œæ¸¬è©¦

```bash
# å‰ç«¯å–®å…ƒæ¸¬è©¦
cd frontend
npm test

# å¾Œç«¯å–®å…ƒæ¸¬è©¦
cd backend
npm test

# E2E æ¸¬è©¦ (Playwright)
cd frontend
npm run test:e2e

# E2E è·¨ç€è¦½å™¨æ¸¬è©¦
npm run test:e2e:all

# æ¸¬è©¦è¦†è“‹ç‡å ±å‘Š
npm test -- --coverage
```

---

## ğŸ“ é–‹ç™¼è¦ç¯„

### ç¨‹å¼ç¢¼é¢¨æ ¼

- éµå¾ª ESLint è¦å‰‡
- ä½¿ç”¨ Prettier æ ¼å¼åŒ–
- TypeScript åš´æ ¼æ¨¡å¼
- åŠŸèƒ½æ¨¡çµ„åŒ–çµ„ç¹”

### Git Commit è¦ç¯„

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¾© Bug
docs: æ–‡ä»¶æ›´æ–°
style: ç¨‹å¼ç¢¼æ ¼å¼èª¿æ•´
refactor: é‡æ§‹
test: æ¸¬è©¦ç›¸é—œ
chore: å»ºç½®/å·¥å…·ç›¸é—œ
```

### åˆ†æ”¯ç­–ç•¥

- `main` - ç©©å®šç”Ÿç”¢ç‰ˆæœ¬
- `develop` - é–‹ç™¼åˆ†æ”¯
- `feature/*` - åŠŸèƒ½é–‹ç™¼
- `fix/*` - Bug ä¿®å¾©

---

## ğŸ“š æ–‡ä»¶

| é¡å‹         | è·¯å¾‘                  | èªªæ˜              |
| ------------ | --------------------- | ----------------- |
| User Stories | `/docs/stories/`      | 12 ä»½è©³ç´°éœ€æ±‚æ–‡ä»¶ |
| é€²åº¦è¿½è¹¤     | `PROJECT-STATUS.md`   | å°ˆæ¡ˆç‹€æ…‹å ±å‘Š      |
| æ¶æ§‹æ–‡ä»¶     | `/docs/architecture/` | ç³»çµ±æ¶æ§‹èªªæ˜      |
| QA å ±å‘Š      | `/docs/qa/`           | æ¸¬è©¦èˆ‡é™¤éŒ¯ç´€éŒ„    |

---

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Pull Requestï¼è«‹ç¢ºä¿ï¼š

1. ç¨‹å¼ç¢¼éµå¾ªå°ˆæ¡ˆé¢¨æ ¼è¦ç¯„
2. æ–°å¢åŠŸèƒ½åŒ…å«å°æ‡‰æ¸¬è©¦
3. æ‰€æœ‰æ¸¬è©¦é€šé
4. Commit è¨Šæ¯æ¸…æ™°æ˜ç¢º
5. æ›´æ–°ç›¸é—œæ–‡ä»¶

---

## ğŸ“„ æˆæ¬Š

MIT License - è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆ

---

## ğŸ‘¨â€ğŸ’» ä½œè€…

**Terry Lin** (tingyu08)

- GitHub: [@tingyu08](https://github.com/tingyu08)
- Email: terryapp0815@gmail.com

---

## ğŸ™ è‡´è¬

- [Twitch API](https://dev.twitch.tv/) - æä¾›ç›´æ’­æ•¸æ“š
- [Twurple](https://twurple.js.org/) - Twitch API å®¢æˆ¶ç«¯
- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [Recharts](https://recharts.org/) - åœ–è¡¨åº«
- [Prisma](https://www.prisma.io/) - è³‡æ–™åº« ORM
- [Playwright](https://playwright.dev/) - E2E æ¸¬è©¦æ¡†æ¶

---

## ğŸ“¬ è¯çµ¡æ–¹å¼

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œæ­¡è¿ï¼š

- æäº¤ [Issue](https://github.com/tingyu08/Twitch-monitoring-and-statistics-system/issues)
- ç™¼é€ Email: terryapp0815@gmail.com
- åœ¨ [Discussions](https://github.com/tingyu08/Twitch-monitoring-and-statistics-system/discussions)
  è¨è«–

---

<p align="center">
  <strong>â­ å¦‚æœé€™å€‹å°ˆæ¡ˆå°ä½ æœ‰å¹«åŠ©ï¼Œè«‹çµ¦å€‹æ˜Ÿæ˜Ÿæ”¯æŒï¼</strong>
</p>
